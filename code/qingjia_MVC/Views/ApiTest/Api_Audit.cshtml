<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <title>API接口测试</title>
    <script>
        const serverPath = 'http://localhost:12516/';
        const access_token = '';

        //模拟Get请求
        function AjaxRequestGet(uri) {
            var server = serverPath;
            var url = server + uri;
            $.ajax({
                type: 'GET',
                contentType: 'application/json',
                dataType: 'json',
                url: url,
                success: function (response) {
                    console.log(response);
                },
                error: function () {
                    console.log('Ajax请求失败！');
                }
            });
        }

        //模拟Post请求
        function AjaxRequestPost(uri, data) {
            var server = serverPath;
            var url = server + uri;
            $.ajax({
                type: 'POST',
                //contentType: 'application/json',//此句话需要配合 json序列化方法使用
                dataType: 'json',
                data: data,
                url: url,
                success: function (response) {
                    console.log(response);
                },
                error: function (response) {
                    console.log('Ajax请求失败！');
                    console.log(response);
                }
            });
        }

        $(document).ready(function () {
            $('#AuditLeave_GetLeavelist').click(function (e) {
                //AjaxRequestGet('api/audit/get?access_token=11&leaveTypeID=0');
                AjaxRequestGet('api/audit/get?access_token=11&leaveTypeID=1&state=4');
                //AjaxRequestGet('api/audit/get?access_token=11&leaveTypeID=11');
            });

            $('#AuditLeave_GetLeavelist_Page').click(function (e) {
                AjaxRequestGet('api/audit/get?access_token=11&leaveTypeID=1&state=3&pageSize=10&page=20');
            });

            $('#AuditLeave_GetLeavelist_Sort').click(function (e) {
                AjaxRequestGet('api/audit/get?access_token=11&leaveTypeID=1&state=3&pageSize=10&page=20&sortDirection=DESC&sortField=Reason');
            });

            $('#GetLeaveTypeListNum').click(function (e) {
                //AjaxRequestGet('api/audit/leaveTypeListNum?access_token=11&state=1');
                AjaxRequestGet('api/audit/leaveTypeListNum?access_token=11&state=2');
                //AjaxRequestGet('api/audit/leaveTypeListNum?access_token=11&state=0');
            });

            $('#PostSelect').click(function (e) {
                var data = {
                    access_token: "11",
                    leaveTypeID: 0,
                    state: '0',
                    pageSize: 10,
                    page: 1,
                    sortDirection: '',
                    sortField: '',
                    conditions: [
                        {
                            fieldName: 'ST_Name',
                            fieldValues: [
                                {
                                    item: '王健铭'
                                }
                            ]
                        }
                    ]
                };
                AjaxRequestPost('api/audit/post', data);
            });

            $('#TransformLeavelist').click(function (e) {
                //AjaxRequestGet('api/system/changeleavelist');
            });
        });
    </script>
</head>
<body>
    <div>
        <h1>API 接口测试：</h1>
        <br />
        <div style="margin-left:200px;">
            <h3>辅导员审批接口测试：</h3>
            <br />
            <br />
            <h4>请假审批</h4>
            <h5>获取请假记录</h5>
            <input type="button" value="获取请假记录" id="AuditLeave_GetLeavelist" />
            <br />
            <br />

            <input type="button" value="分页获取请假记录" id="AuditLeave_GetLeavelist_Page" />
            <br />
            <br />

            <input type="button" value="排序_分页获取请假记录" id="AuditLeave_GetLeavelist_Sort" />
            <br />
            <br />

            <input type="button" value="获取请假类型及条数" id="GetLeaveTypeListNum" />
            <br />
            <br />

            <input type="button" value="复合条件查询" id="PostSelect" />
            <br />
            <br />

            <h5>转换请假记录</h5>
            <input type="button" value="转换请假记录" id="TransformLeavelist" />
            <br />
            <br />
        </div>
    </div>
</body>
</html>
